module.exports=function(t){var n={};function e(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(a,o,function(n){return t[n]}.bind(null,o));return a},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=13)}([function(t,n){t.exports=flarum.core.compat["common/Model"]},function(t,n,e){"use strict";function a(t,n){return(a=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function o(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n)}e.d(n,"a",(function(){return o}))},function(t,n){t.exports=flarum.core.compat["common/components/Button"]},function(t,n){t.exports=flarum.core.compat["common/components/LoadingIndicator"]},function(t,n){t.exports=flarum.core.compat["common/components/GroupBadge"]},function(t,n,e){"use strict";function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}e.d(n,"a",(function(){return s}));var o=e(1);function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var i=e(0),u=e.n(i),s=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return r(a(n=t.call.apply(t,[this].concat(o))||this),"code",u.a.attribute("code")),r(a(n),"hasUsagesLeft",u.a.attribute("hasUsagesLeft")),r(a(n),"canUse",u.a.attribute("canUse")),r(a(n),"usageCount",u.a.attribute("usageCount")),r(a(n),"maxUsage",u.a.attribute("maxUsage")),r(a(n),"createdAt",u.a.attribute("createdAt",u.a.transformDate)),r(a(n),"group",u.a.hasOne("group")),n}return Object(o.a)(n,t),n.prototype.apiEndpoint=function(){return"/group-invitations"+(this.exists?"/"+this.data.id:"")},n}(u.a)},function(t,n){t.exports=flarum.core.compat["common/models/Group"]},,,,,function(t,n){t.exports=flarum.core.compat["admin/components/ExtensionPage"]},function(t,n){t.exports=flarum.core.compat["common/helpers/icon"]},function(t,n,e){"use strict";e.r(n);var a=e(5),o=e(1),r=e(2),i=e.n(r),u=e(4),s=e.n(u),c=e(3),p=e.n(c),l=e(11),d=e.n(l),f=e(6),g=e.n(f),h=e(12),v=e.n(h),b=function(){function t(){}return t.prototype.view=function(t){var n=t.attrs,e=n.onchange,a=n.value;return m("span.Select",[m("select.Select-input.FormControl",{onchange:function(t){e(t.target.value)},value:a},[m("option",{value:"",disabled:!0,hidden:!0},app.translator.trans("clarkwinkelmann-group-invitation.admin.settings.placeholder.group")),app.store.all("groups").filter((function(t){return-1===[g.a.GUEST_ID,g.a.MEMBER_ID].indexOf(t.id())})).map((function(t){return m("option",{value:t.id()},t.namePlural())}))]),v()("fas fa-sort",{className:"Select-caret"})])},t}(),w="clarkwinkelmann-group-invitation.admin.settings.",y=function(t){function n(){return t.apply(this,arguments)||this}Object(o.a)(n,t);var e=n.prototype;return e.oninit=function(n){var e=this;t.prototype.oninit.call(this,n),this.invitations=null,app.store.find("group-invitations").then((function(t){e.invitations=t,m.redraw()})),this.loading=!1,this.newInvitationGroupId="",this.newInvitationMaxUsage=""},e.content=function(){var t=this;return m(".ExtensionPage-settings.GroupInvitationSettingsPage",m(".container",[m("table",[m("thead",m("tr",[m("th",app.translator.trans(w+"head.code")),m("th",app.translator.trans(w+"head.group")),m("th",app.translator.trans(w+"head.usage")),m("th")])),m("tbody",[null===this.invitations?m("tr",m("td",p.a.component())):[this.invitations.map((function(n,e){return m("tr",[m("td",m("a",{href:app.forum.attribute("baseUrl")+"/get-role/"+n.code(),target:"_blank"},m("code",n.code()))),m("td",[s.a.component({group:n.group()})," ",n.group().namePlural()]),m("td",n.usageCount()+"/"+(null===n.maxUsage()?app.translator.trans(w+"unlimited"):n.maxUsage())),m("td",i.a.component({className:"Button Button--danger",onclick:function(){t.loading=!0,n.delete().then((function(){t.loading=!1,t.invitations.splice(e,1),m.redraw()})).catch((function(n){throw t.loading=!1,m.redraw(),n}))},loading:t.loading},app.translator.trans(w+"delete")))])})),0===this.invitations.length?m("tr.NoResultRow",m("td",{colspan:4},m("em",app.translator.trans(w+"empty")))):null],m("tr",[m("td",m("em",app.translator.trans(w+"placeholder.code"))),m("td",m(b,{onchange:function(n){t.newInvitationGroupId=n},value:this.newInvitationGroupId})),m("td",m("input.FormControl",{type:"number",min:"0",onchange:function(n){var e=n.target.value;t.newInvitationMaxUsage="0"===e?"":e},value:this.newInvitationMaxUsage,placeholder:app.translator.trans(w+"placeholder.usage")})),m("td",i.a.component({className:"Button Button--primary",onclick:function(){t.loading=!0,app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/group-invitations",body:{groupId:t.newInvitationGroupId,maxUsage:t.newInvitationMaxUsage}}).then((function(n){t.loading=!1,t.invitations.push(app.store.pushPayload(n)),t.newInvitationGroupId="",t.newInvitationMaxUsage="",m.redraw()})).catch((function(n){throw t.loading=!1,m.redraw(),n}))},loading:this.loading,disabled:!this.newInvitationGroupId},app.translator.trans(w+"create")))])])])]))},n}(d.a);app.initializers.add("clarkwinkelmann-group-invitation",(function(){app.store.models["group-invitations"]=a.a,app.extensionData.for("clarkwinkelmann-group-invitation").registerPage(y).registerPermission({icon:"fas fa-certificate",label:app.translator.trans("clarkwinkelmann-group-invitation.admin.permissions.use"),permission:"clarkwinkelmann-group-invitation.use"},"start")}))}]);
//# sourceMappingURL=admin.js.map