module.exports=function(t){var n={};function a(o){if(n[o])return n[o].exports;var e=n[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,a),e.l=!0,e.exports}return a.m=t,a.c=n,a.d=function(t,n,o){a.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,n){if(1&n&&(t=a(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var e in t)a.d(o,e,function(n){return t[n]}.bind(null,e));return o},a.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(n,"a",n),n},a.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},a.p="",a(a.s=18)}([function(t,n){t.exports=flarum.core.compat.app},function(t,n){t.exports=flarum.core.compat.Model},function(t,n,a){"use strict";function o(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}a.d(n,"a",(function(){return o}))},function(t,n){t.exports=flarum.core.compat["components/Button"]},function(t,n){t.exports=flarum.core.compat.extend},function(t,n,a){"use strict";a.d(n,"a",(function(){return u}));var o=a(2),e=a(1),r=a.n(e),i=a(6),u=function(t){function n(){return t.apply(this,arguments)||this}return Object(o.a)(n,t),n.prototype.apiEndpoint=function(){return"/group-invitations"+(this.exists?"/"+this.data.id:"")},n}(a.n(i)()(r.a,{code:r.a.attribute("code"),hasUsagesLeft:r.a.attribute("hasUsagesLeft"),canUse:r.a.attribute("canUse"),usageCount:r.a.attribute("usageCount"),maxUsage:r.a.attribute("maxUsage"),createdAt:r.a.attribute("createdAt",r.a.transformDate),group:r.a.hasOne("group")}))},function(t,n){t.exports=flarum.core.compat["utils/mixin"]},function(t,n){t.exports=flarum.core.compat["components/LoadingIndicator"]},function(t,n){t.exports=flarum.core.compat["components/GroupBadge"]},function(t,n){t.exports=flarum.core.compat["models/Group"]},,,,,function(t,n){t.exports=flarum.core.compat["components/PermissionGrid"]},function(t,n){t.exports=flarum.core.compat["components/Modal"]},function(t,n){t.exports=flarum.core.compat.Component},function(t,n){t.exports=flarum.core.compat["helpers/icon"]},function(t,n,a){"use strict";a.r(n);var o=a(4),e=a(0),r=a.n(e),i=a(14),u=a.n(i),s=a(2),c=a(15),l=a.n(c),p=a(3),d=a.n(p),f=a(8),g=a.n(f),h=a(7),v=a.n(h),b=a(16),x=a.n(b),w=a(9),y=a.n(w),I=a(17),k=a.n(I),U=function(t){function n(){return t.apply(this,arguments)||this}return Object(s.a)(n,t),n.prototype.view=function(){var t=this.props,n=t.onchange,a=t.value;return m("span.Select",[m("select.Select-input.FormControl",{onchange:m.withAttr("value",n.bind(this)),value:a},[m("option",{value:"",disabled:!0,hidden:!0},r.a.translator.trans("clarkwinkelmann-group-invitation.admin.settings.placeholder.group")),r.a.store.all("groups").filter((function(t){return-1===[y.a.GUEST_ID,y.a.MEMBER_ID].indexOf(t.id())})).map((function(t){return m("option",{value:t.id()},t.namePlural())}))]),k()("fas fa-sort",{className:"Select-caret"})])},n}(x.a),M="clarkwinkelmann-group-invitation.admin.settings.",O=function(t){function n(){return t.apply(this,arguments)||this}Object(s.a)(n,t);var a=n.prototype;return a.className=function(){return"GroupInvitationSettingsModal Modal--large"},a.title=function(){return r.a.translator.trans(M+"title")},a.init=function(){var n=this;t.prototype.init.call(this),this.invitations=null,r.a.store.find("group-invitations").then((function(t){n.invitations=t,m.redraw()})),this.loading=!1,this.newInvitationGroupId="",this.newInvitationMaxUsage=""},a.content=function(){var t=this;return m(".Modal-body",[m("table",[m("thead",m("tr",[m("th",r.a.translator.trans(M+"head.code")),m("th",r.a.translator.trans(M+"head.group")),m("th",r.a.translator.trans(M+"head.usage")),m("th")])),m("tbody",[null===this.invitations?m("tr",m("td",v.a.component())):[this.invitations.map((function(n,a){return m("tr",[m("td",m("a",{href:r.a.forum.attribute("baseUrl")+"/get-role/"+n.code(),target:"_blank"},m("code",n.code()))),m("td",[g.a.component({group:n.group()})," ",n.group().namePlural()]),m("td",n.usageCount()+"/"+(null===n.maxUsage()?r.a.translator.trans(M+"unlimited"):n.maxUsage())),m("td",d.a.component({className:"Button Button--danger",onclick:function(){t.loading=!0,n.delete().then((function(){t.loading=!1,t.invitations.splice(a,1),m.redraw()})).catch((function(n){throw t.loading=!1,m.redraw(),n}))},loading:t.loading},r.a.translator.trans(M+"delete")))])})),0===this.invitations.length?m("tr.NoResultRow",m("td",{colspan:4},m("em",r.a.translator.trans(M+"empty")))):null],m("tr",[m("td",m("em",r.a.translator.trans(M+"placeholder.code"))),m("td",U.component({onchange:function(n){t.newInvitationGroupId=n},value:this.newInvitationGroupId})),m("td",m("input.FormControl",{type:"number",min:"0",onchange:m.withAttr("value",(function(n){t.newInvitationMaxUsage="0"===n?"":n})),value:this.newInvitationMaxUsage,placeholder:r.a.translator.trans(M+"placeholder.usage")})),m("td",d.a.component({className:"Button Button--primary",onclick:function(){t.loading=!0,r.a.request({method:"POST",url:r.a.forum.attribute("apiUrl")+"/group-invitations",data:{groupId:t.newInvitationGroupId,maxUsage:t.newInvitationMaxUsage}}).then((function(n){t.loading=!1,t.invitations.push(r.a.store.pushPayload(n)),t.newInvitationGroupId="",t.newInvitationMaxUsage="",m.redraw()})).catch((function(n){throw t.loading=!1,m.redraw(),n}))},loading:this.loading,disabled:!this.newInvitationGroupId},r.a.translator.trans(M+"create")))])])])])},n}(l.a),_=a(5);r.a.initializers.add("clarkwinkelmann-group-invitation",(function(){r.a.extensionSettings["clarkwinkelmann-group-invitation"]=function(){return r.a.modal.show(new O)},r.a.store.models["group-invitations"]=_.a,Object(o.extend)(u.a.prototype,"startItems",(function(t){t.add("clarkwinkelmann-group-invitation-use",{icon:"fas fa-certificate",label:r.a.translator.trans("clarkwinkelmann-group-invitation.admin.permissions.use"),permission:"clarkwinkelmann-group-invitation.use"})}))}))}]);
//# sourceMappingURL=admin.js.map